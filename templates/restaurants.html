{% extends "base.html" %}

{% block content %}

<h2>Restaurants</h2>

<!-- ðŸ” Search Box -->
<form method="get" class="mb-4">
    <input
        type="text"
        name="q"
        placeholder="Search restaurant..."
        value="{{ request.args.get('q', '') }}"
    >
    <button type="submit">Search</button>
</form>

{% if restaurants|length == 0 %}
    <!-- ðŸš« Empty State -->
    <div class="empty-state">
        <p><strong>No restaurants found.</strong></p>
        <p>Try adding a new restaurant or change your search keyword.</p>
        <a href="/add-restaurant">âž• Add Restaurant</a>
    </div>
{% else %}
    <ul>
    {% for r in restaurants %}
        <li>
            <b>{{ r.name }}</b> - {{ r.location }}<br>

            <a href="/restaurants/{{ r.id }}/edit">Edit</a> |

            <!-- ðŸ”’ Delete with POST -->
            <form action="/restaurants/{{ r.id }}/delete"
                  method="post"
                  style="display:inline;"
                  onsubmit="return confirm('Are you sure you want to delete this restaurant?');">
                <button type="submit">Delete</button>
            </form>
        </li>
    {% endfor %}
    </ul>
{% endif %}

{% endblock %}